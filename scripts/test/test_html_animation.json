{
  "$mulmocast": {
    "version": "1.1"
  },
  "lang": "en",
  "title": "MulmoCast HTML Animation Guide",
  "speechParams": {
    "speakers": {
      "Presenter": {
        "voiceId": "shimmer",
        "displayName": {
          "en": "Presenter"
        }
      }
    }
  },
  "beats": [
    {
      "id": "intro_title",
      "speaker": "Presenter",
      "duration": 3,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900'>",
          "  <h1 id='title' class='text-5xl font-bold text-white mb-6' style='opacity:0'>MulmoCast Animation</h1>",
          "  <p id='subtitle' class='text-xl text-blue-300' style='opacity:0'>Frame-based HTML animation for deterministic video</p>",
          "  <div id='line' class='h-1 bg-gradient-to-r from-cyan-400 to-purple-500 mt-8 rounded' style='width:0'></div>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var title = document.getElementById('title');",
          "  title.style.opacity = interpolate(frame, [0, fps * 0.5], [0, 1]);",
          "  title.style.transform = 'translateY(' + interpolateWithEasing(frame, [0, fps * 0.5], [30, 0], Easing.easeOut) + 'px)';",
          "  var sub = document.getElementById('subtitle');",
          "  sub.style.opacity = interpolate(frame, [fps * 0.3, fps * 0.8], [0, 1]);",
          "  sub.style.transform = 'translateY(' + interpolateWithEasing(frame, [fps * 0.3, fps * 0.8], [20, 0], Easing.easeOut) + 'px)';",
          "  document.getElementById('line').style.width = interpolateWithEasing(frame, [fps * 0.5, fps * 1.5], [0, 400], Easing.easeInOut) + 'px';",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "id": "explain_basics",
      "speaker": "Presenter",
      "duration": 4,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col justify-center bg-slate-900 px-16'>",
          "  <h2 id='heading' class='text-3xl font-bold text-white mb-8' style='opacity:0'>How It Works</h2>",
          "  <div class='bg-slate-800 rounded-xl p-6 mb-6'>",
          "    <p class='text-sm text-slate-400 mb-2 font-mono'>MulmoScript (JSON)</p>",
          "    <pre id='code' class='text-lg font-mono text-green-400 leading-relaxed'></pre>",
          "  </div>",
          "  <div id='note' class='text-base text-slate-400 leading-relaxed' style='opacity:0'>",
          "    <p>Add <code class='text-cyan-400'>\"animation\": true</code> to enable frame-based rendering.</p>",
          "    <p>Define a <code class='text-cyan-400'>render(frame, totalFrames, fps)</code> function in your HTML.</p>",
          "    <p>Each frame is captured by Puppeteer, then combined into video by FFmpeg.</p>",
          "  </div>",
          "</div>",
          "<script>",
          "var codeLines = [",
          "  '{',",
          "  '  \"image\": {',",
          "  '    \"type\": \"html_tailwind\",',",
          "  '    \"html\": \"<div>...</div>\",',",
          "  '    \"animation\": true',",
          "  '  },',",
          "  '  \"duration\": 3',",
          "  '}'",
          "];",
          "function render(frame, totalFrames, fps) {",
          "  document.getElementById('heading').style.opacity = interpolate(frame, [0, fps * 0.3], [0, 1]);",
          "  var lineCount = Math.floor(interpolate(frame, [fps * 0.3, fps * 2.5], [0, codeLines.length]));",
          "  document.getElementById('code').textContent = codeLines.slice(0, lineCount).join('\\n');",
          "  document.getElementById('note').style.opacity = interpolate(frame, [fps * 2.5, fps * 3], [0, 1]);",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "id": "explain_render",
      "speaker": "Presenter",
      "duration": 4,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col justify-center bg-slate-900 px-16'>",
          "  <h2 class='text-3xl font-bold text-white mb-6'>The render() Function</h2>",
          "  <div class='bg-slate-800 rounded-xl p-6 mb-6'>",
          "    <pre id='fn-code' class='text-base font-mono text-green-400 leading-relaxed'></pre>",
          "  </div>",
          "  <div class='flex gap-8 mt-4'>",
          "    <div id='param0' class='flex-1 bg-slate-800 rounded-lg p-4' style='opacity:0'>",
          "      <p class='text-cyan-400 font-mono font-bold mb-1'>frame</p>",
          "      <p class='text-slate-300 text-sm'>Current frame number (0-based)</p>",
          "      <p id='frame-val' class='text-2xl font-mono text-white mt-2'>0</p>",
          "    </div>",
          "    <div id='param1' class='flex-1 bg-slate-800 rounded-lg p-4' style='opacity:0'>",
          "      <p class='text-purple-400 font-mono font-bold mb-1'>totalFrames</p>",
          "      <p class='text-slate-300 text-sm'>Total frame count = floor(duration * fps)</p>",
          "      <p id='total-val' class='text-2xl font-mono text-white mt-2'>120</p>",
          "    </div>",
          "    <div id='param2' class='flex-1 bg-slate-800 rounded-lg p-4' style='opacity:0'>",
          "      <p class='text-yellow-400 font-mono font-bold mb-1'>fps</p>",
          "      <p class='text-slate-300 text-sm'>Frames per second (default: 30)</p>",
          "      <p class='text-2xl font-mono text-white mt-2'>30</p>",
          "    </div>",
          "  </div>",
          "</div>",
          "<script>",
          "var fnLines = [",
          "  'function render(frame, totalFrames, fps) {',",
          "  '  // Called once per frame by Puppeteer',",
          "  '  // Manipulate DOM based on frame number',",
          "  '  var progress = frame / totalFrames;',",
          "  '  element.style.opacity = progress;',",
          "  '}'",
          "];",
          "function render(frame, totalFrames, fps) {",
          "  var lineCount = Math.floor(interpolate(frame, [0, fps * 1.0], [0, fnLines.length]));",
          "  document.getElementById('fn-code').textContent = fnLines.slice(0, lineCount).join('\\n');",
          "  for (var i = 0; i < 3; i++) {",
          "    var start = fps * 1.2 + i * fps * 0.4;",
          "    document.getElementById('param' + i).style.opacity = interpolate(frame, [start, start + fps * 0.3], [0, 1]);",
          "    document.getElementById('param' + i).style.transform = 'translateY(' + interpolateWithEasing(frame, [start, start + fps * 0.3], [15, 0], Easing.easeOut) + 'px)';",
          "  }",
          "  document.getElementById('frame-val').textContent = Math.floor(interpolate(frame, [fps * 2.5, totalFrames], [0, totalFrames]));",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "id": "explain_interpolate",
      "speaker": "Presenter",
      "duration": 5,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col justify-center bg-slate-900 px-16'>",
          "  <h2 class='text-3xl font-bold text-white mb-6'>Helper: interpolate()</h2>",
          "  <div class='bg-slate-800 rounded-xl p-4 mb-6'>",
          "    <pre class='text-base font-mono text-green-400'>interpolate(frame, [startFrame, endFrame], [startValue, endValue])</pre>",
          "  </div>",
          "  <p class='text-slate-400 mb-6'>Linear interpolation with clamping. Maps frame range to value range.</p>",
          "  <div class='flex gap-8'>",
          "    <div class='flex-1'>",
          "      <p class='text-white font-semibold mb-3'>Live Demo: opacity & position</p>",
          "      <div class='bg-slate-800 rounded-lg h-40 relative overflow-hidden'>",
          "        <div id='demo-ball' class='w-12 h-12 bg-cyan-400 rounded-full absolute top-14' style='left:10px; opacity:0'></div>",
          "        <div class='absolute bottom-2 left-2 right-2 h-1 bg-slate-700 rounded'></div>",
          "      </div>",
          "      <p id='demo-label' class='text-sm font-mono text-slate-400 mt-2'></p>",
          "    </div>",
          "    <div class='flex-1'>",
          "      <p class='text-white font-semibold mb-3'>Code</p>",
          "      <div class='bg-slate-800 rounded-lg p-4'>",
          "        <pre id='demo-code' class='text-sm font-mono text-green-400 leading-relaxed'></pre>",
          "      </div>",
          "    </div>",
          "  </div>",
          "</div>",
          "<script>",
          "var demoCode = [",
          "  '// Fade in during first second',",
          "  'var opacity = interpolate(',",
          "  '  frame, [0, fps], [0, 1]',",
          "  ');',",
          "  '',",
          "  '// Move across during full duration',",
          "  'var x = interpolate(',",
          "  '  frame, [0, totalFrames],',",
          "  '  [10, 350]',",
          "  ');'",
          "];",
          "function render(frame, totalFrames, fps) {",
          "  var ball = document.getElementById('demo-ball');",
          "  var opacity = interpolate(frame, [0, fps], [0, 1]);",
          "  var x = interpolate(frame, [0, totalFrames], [10, 350]);",
          "  ball.style.opacity = opacity;",
          "  ball.style.left = x + 'px';",
          "  document.getElementById('demo-label').textContent = 'frame=' + frame + '  opacity=' + opacity.toFixed(2) + '  x=' + Math.round(x);",
          "  var codeLineCount = Math.floor(interpolate(frame, [fps * 0.5, fps * 2], [0, demoCode.length]));",
          "  document.getElementById('demo-code').textContent = demoCode.slice(0, codeLineCount).join('\\n');",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "id": "explain_easing",
      "speaker": "Presenter",
      "duration": 5,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col justify-center bg-slate-900 px-16'>",
          "  <h2 class='text-3xl font-bold text-white mb-2'>Easing Functions</h2>",
          "  <p class='text-slate-400 mb-6'>interpolateWithEasing(frame, inputRange, outputRange, Easing.xxx)</p>",
          "  <div class='flex gap-6'>",
          "    <div class='flex-1 text-center'>",
          "      <p class='text-cyan-400 font-mono mb-2'>Easing.linear</p>",
          "      <div class='bg-slate-800 rounded-lg h-48 relative overflow-hidden'>",
          "        <div id='e-linear' class='w-8 h-8 bg-cyan-400 rounded-full absolute left-4' style='bottom:10px'></div>",
          "      </div>",
          "    </div>",
          "    <div class='flex-1 text-center'>",
          "      <p class='text-green-400 font-mono mb-2'>Easing.easeIn</p>",
          "      <div class='bg-slate-800 rounded-lg h-48 relative overflow-hidden'>",
          "        <div id='e-in' class='w-8 h-8 bg-green-400 rounded-full absolute left-4' style='bottom:10px'></div>",
          "      </div>",
          "    </div>",
          "    <div class='flex-1 text-center'>",
          "      <p class='text-yellow-400 font-mono mb-2'>Easing.easeOut</p>",
          "      <div class='bg-slate-800 rounded-lg h-48 relative overflow-hidden'>",
          "        <div id='e-out' class='w-8 h-8 bg-yellow-400 rounded-full absolute left-4' style='bottom:10px'></div>",
          "      </div>",
          "    </div>",
          "    <div class='flex-1 text-center'>",
          "      <p class='text-rose-400 font-mono mb-2'>Easing.easeInOut</p>",
          "      <div class='bg-slate-800 rounded-lg h-48 relative overflow-hidden'>",
          "        <div id='e-inout' class='w-8 h-8 bg-rose-400 rounded-full absolute left-4' style='bottom:10px'></div>",
          "      </div>",
          "    </div>",
          "  </div>",
          "  <p id='easing-frame' class='text-sm font-mono text-slate-500 mt-4 text-center'></p>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var start = fps * 0.5;",
          "  var end = totalFrames - fps * 0.5;",
          "  var maxY = 160;",
          "  document.getElementById('e-linear').style.bottom = (10 + interpolateWithEasing(frame, [start, end], [0, maxY], Easing.linear)) + 'px';",
          "  document.getElementById('e-in').style.bottom = (10 + interpolateWithEasing(frame, [start, end], [0, maxY], Easing.easeIn)) + 'px';",
          "  document.getElementById('e-out').style.bottom = (10 + interpolateWithEasing(frame, [start, end], [0, maxY], Easing.easeOut)) + 'px';",
          "  document.getElementById('e-inout').style.bottom = (10 + interpolateWithEasing(frame, [start, end], [0, maxY], Easing.easeInOut)) + 'px';",
          "  var t = interpolate(frame, [start, end], [0, 100]);",
          "  document.getElementById('easing-frame').textContent = 'frame ' + frame + ' / ' + totalFrames + '  |  progress: ' + t.toFixed(0) + '%';",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "id": "explain_fps",
      "speaker": "Presenter",
      "duration": 3,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col justify-center bg-slate-900 px-16'>",
          "  <h2 class='text-3xl font-bold text-white mb-6'>Custom FPS</h2>",
          "  <div class='bg-slate-800 rounded-xl p-4 mb-6'>",
          "    <pre class='text-base font-mono text-green-400'>\"animation\": true          // default 30fps</pre>",
          "    <pre class='text-base font-mono text-yellow-400'>\"animation\": { \"fps\": 15 } // custom fps</pre>",
          "  </div>",
          "  <p class='text-slate-400 mb-8'>Lower fps = fewer frames = faster render. Higher fps = smoother motion.</p>",
          "  <div class='flex gap-8'>",
          "    <div class='flex-1 text-center'>",
          "      <p class='text-slate-300 font-semibold mb-3'>15 fps (this beat uses 15fps)</p>",
          "      <div class='bg-slate-800 rounded-lg h-24 relative overflow-hidden'>",
          "        <div id='ball15' class='w-10 h-10 bg-yellow-400 rounded-full absolute top-7' style='left:10px'></div>",
          "      </div>",
          "    </div>",
          "    <div class='flex-1 text-center'>",
          "      <p class='text-slate-300 font-semibold mb-3'>Simulated 30fps motion</p>",
          "      <div class='bg-slate-800 rounded-lg h-24 relative overflow-hidden'>",
          "        <div id='ball30' class='w-10 h-10 bg-cyan-400 rounded-full absolute top-7' style='left:10px'></div>",
          "      </div>",
          "    </div>",
          "  </div>",
          "  <p id='fps-info' class='text-sm font-mono text-slate-500 mt-4 text-center'></p>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var x = interpolateWithEasing(frame, [0, totalFrames], [10, 700], Easing.easeInOut);",
          "  document.getElementById('ball15').style.left = x + 'px';",
          "  var smoothFrame = frame * 2;",
          "  var smoothTotal = totalFrames * 2;",
          "  var x2 = interpolateWithEasing(smoothFrame, [0, smoothTotal], [10, 700], Easing.easeInOut);",
          "  document.getElementById('ball30').style.left = x2 + 'px';",
          "  document.getElementById('fps-info').textContent = 'frame ' + frame + ' / ' + totalFrames + '  |  fps=' + fps + '  |  totalFrames = floor(' + (totalFrames/fps).toFixed(0) + 's * ' + fps + 'fps)';",
          "}",
          "</script>"
        ],
        "animation": { "fps": 15 }
      }
    },
    {
      "id": "demo_fade_in",
      "speaker": "Presenter",
      "duration": 2,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600'>",
          "  <h1 id='title' class='text-6xl font-bold text-white'>Fade In Title</h1>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var title = document.getElementById('title');",
          "  var opacity = interpolate(frame, [0, fps], [0, 1]);",
          "  title.style.opacity = opacity;",
          "  var scale = interpolateWithEasing(frame, [0, fps], [0.8, 1], Easing.easeOut);",
          "  title.style.transform = 'scale(' + scale + ')';",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "speaker": "Presenter",
      "duration": 3,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex items-center justify-center bg-gray-900 overflow-hidden'>",
          "  <div id='box' class='w-40 h-40 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-2xl'></div>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var box = document.getElementById('box');",
          "  var rotation = interpolate(frame, [0, totalFrames], [0, 360]);",
          "  var scale = 0.5 + 0.5 * Math.sin(frame / fps * Math.PI);",
          "  box.style.transform = 'rotate(' + rotation + 'deg) scale(' + scale + ')';",
          "}",
          "</script>"
        ],
        "animation": { "fps": 30 }
      }
    },
    {
      "speaker": "Presenter",
      "duration": 2,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full bg-white p-12'>",
          "  <div id='bar1' class='h-8 bg-blue-500 rounded-r mb-4'></div>",
          "  <div id='bar2' class='h-8 bg-green-500 rounded-r mb-4'></div>",
          "  <div id='bar3' class='h-8 bg-red-500 rounded-r mb-4'></div>",
          "  <p id='label' class='text-gray-600 text-lg mt-8'>Loading progress...</p>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var t = frame / totalFrames;",
          "  document.getElementById('bar1').style.width = interpolate(frame, [0, totalFrames * 0.5], [0, 80]) + '%';",
          "  document.getElementById('bar2').style.width = interpolate(frame, [fps * 0.3, totalFrames * 0.7], [0, 60]) + '%';",
          "  document.getElementById('bar3').style.width = interpolate(frame, [fps * 0.6, totalFrames], [0, 90]) + '%';",
          "  document.getElementById('label').textContent = 'Progress: ' + Math.round(t * 100) + '%';",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "speaker": "Presenter",
      "duration": 3,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex items-center justify-center bg-slate-900'>",
          "  <svg id='svg-canvas' width='400' height='400' viewBox='0 0 400 400'>",
          "    <circle id='circle1' cx='200' cy='200' r='0' fill='none' stroke='#06b6d4' stroke-width='3' />",
          "    <circle id='circle2' cx='200' cy='200' r='0' fill='none' stroke='#8b5cf6' stroke-width='3' />",
          "    <circle id='circle3' cx='200' cy='200' r='0' fill='none' stroke='#f43f5e' stroke-width='3' />",
          "    <circle id='dot' cx='200' cy='200' r='8' fill='#fbbf24' />",
          "  </svg>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var c1 = document.getElementById('circle1');",
          "  var c2 = document.getElementById('circle2');",
          "  var c3 = document.getElementById('circle3');",
          "  var dot = document.getElementById('dot');",
          "  c1.setAttribute('r', interpolate(frame, [0, totalFrames * 0.6], [0, 150]));",
          "  c1.setAttribute('opacity', interpolate(frame, [totalFrames * 0.4, totalFrames], [1, 0.2]));",
          "  c2.setAttribute('r', interpolate(frame, [fps * 0.3, totalFrames * 0.7], [0, 120]));",
          "  c2.setAttribute('opacity', interpolate(frame, [totalFrames * 0.5, totalFrames], [1, 0.2]));",
          "  c3.setAttribute('r', interpolate(frame, [fps * 0.6, totalFrames * 0.8], [0, 90]));",
          "  var angle = interpolate(frame, [0, totalFrames], [0, Math.PI * 4]);",
          "  var orbitR = interpolateWithEasing(frame, [0, totalFrames], [0, 160], Easing.easeOut);",
          "  dot.setAttribute('cx', 200 + Math.cos(angle) * orbitR);",
          "  dot.setAttribute('cy', 200 + Math.sin(angle) * orbitR);",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "speaker": "Presenter",
      "duration": 3,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex items-center justify-center bg-gray-950'>",
          "  <svg id='wave-svg' width='600' height='200' viewBox='0 0 600 200'>",
          "    <path id='wave-path' fill='none' stroke='url(#grad)' stroke-width='4' stroke-linecap='round' />",
          "    <defs>",
          "      <linearGradient id='grad' x1='0%' y1='0%' x2='100%' y2='0%'>",
          "        <stop offset='0%' stop-color='#06b6d4' />",
          "        <stop offset='50%' stop-color='#8b5cf6' />",
          "        <stop offset='100%' stop-color='#f43f5e' />",
          "      </linearGradient>",
          "    </defs>",
          "  </svg>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var phase = interpolate(frame, [0, totalFrames], [0, Math.PI * 6]);",
          "  var amp = interpolateWithEasing(frame, [0, fps], [0, 60], Easing.easeOut);",
          "  var points = [];",
          "  for (var x = 0; x <= 600; x += 4) {",
          "    var y = 100 + Math.sin(x * 0.02 + phase) * amp * Math.sin(x * 0.005 + phase * 0.3);",
          "    points.push((x === 0 ? 'M' : 'L') + x + ' ' + y);",
          "  }",
          "  document.getElementById('wave-path').setAttribute('d', points.join(' '));",
          "}",
          "</script>"
        ],
        "animation": { "fps": 30 }
      }
    },
    {
      "speaker": "Presenter",
      "duration": 4,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col items-center justify-center bg-gray-900 px-16'>",
          "  <p id='typewriter' class='text-2xl font-mono text-green-400 leading-relaxed max-w-2xl'></p>",
          "  <span id='cursor' class='text-2xl font-mono text-green-400'>|</span>",
          "</div>",
          "<script>",
          "var fullText = 'MulmoCast transforms your ideas into multi-modal presentations. With frame-based animation, you can create smooth, deterministic visuals â€” just like Remotion, but powered by HTML and Tailwind CSS.';",
          "function render(frame, totalFrames, fps) {",
          "  var charCount = Math.floor(interpolate(frame, [0, totalFrames * 0.85], [0, fullText.length]));",
          "  document.getElementById('typewriter').textContent = fullText.substring(0, charCount);",
          "  document.getElementById('cursor').style.opacity = Math.sin(frame * 0.3) > 0 ? 1 : 0;",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "speaker": "Presenter",
      "duration": 3,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800'>",
          "  <svg id='pie-svg' width='300' height='300' viewBox='0 0 300 300'></svg>",
          "</div>",
          "<script>",
          "var data = [",
          "  { value: 35, color: '#3b82f6', label: 'Blue' },",
          "  { value: 25, color: '#10b981', label: 'Green' },",
          "  { value: 20, color: '#f59e0b', label: 'Yellow' },",
          "  { value: 20, color: '#ef4444', label: 'Red' }",
          "];",
          "function render(frame, totalFrames, fps) {",
          "  var svg = document.getElementById('pie-svg');",
          "  svg.innerHTML = '';",
          "  var cx = 150, cy = 150, r = 120;",
          "  var progress = interpolateWithEasing(frame, [0, totalFrames * 0.7], [0, 1], Easing.easeInOut);",
          "  var totalAngle = progress * Math.PI * 2;",
          "  var startAngle = -Math.PI / 2;",
          "  var total = data.reduce(function(s, d) { return s + d.value; }, 0);",
          "  for (var i = 0; i < data.length; i++) {",
          "    var sliceAngle = (data[i].value / total) * totalAngle;",
          "    var endAngle = startAngle + sliceAngle;",
          "    var x1 = cx + r * Math.cos(startAngle);",
          "    var y1 = cy + r * Math.sin(startAngle);",
          "    var x2 = cx + r * Math.cos(endAngle);",
          "    var y2 = cy + r * Math.sin(endAngle);",
          "    var large = sliceAngle > Math.PI ? 1 : 0;",
          "    var d = 'M' + cx + ' ' + cy + ' L' + x1 + ' ' + y1 + ' A' + r + ' ' + r + ' 0 ' + large + ' 1 ' + x2 + ' ' + y2 + ' Z';",
          "    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');",
          "    path.setAttribute('d', d);",
          "    path.setAttribute('fill', data[i].color);",
          "    svg.appendChild(path);",
          "    startAngle = endAngle;",
          "  }",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "speaker": "Presenter",
      "duration": 3,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col items-center justify-center bg-white gap-6 px-16'>",
          "  <div id='item0' class='w-full max-w-lg p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500' style='opacity:0; transform: translateX(-40px)'>",
          "    <p class='text-lg font-semibold text-blue-800'>1. Schema Design</p>",
          "  </div>",
          "  <div id='item1' class='w-full max-w-lg p-4 bg-green-50 rounded-lg border-l-4 border-green-500' style='opacity:0; transform: translateX(-40px)'>",
          "    <p class='text-lg font-semibold text-green-800'>2. Frame Renderer</p>",
          "  </div>",
          "  <div id='item2' class='w-full max-w-lg p-4 bg-purple-50 rounded-lg border-l-4 border-purple-500' style='opacity:0; transform: translateX(-40px)'>",
          "    <p class='text-lg font-semibold text-purple-800'>3. FFmpeg Pipeline</p>",
          "  </div>",
          "  <div id='item3' class='w-full max-w-lg p-4 bg-orange-50 rounded-lg border-l-4 border-orange-500' style='opacity:0; transform: translateX(-40px)'>",
          "    <p class='text-lg font-semibold text-orange-800'>4. Integration Test</p>",
          "  </div>",
          "</div>",
          "<script>",
          "function render(frame, totalFrames, fps) {",
          "  var stagger = fps * 0.4;",
          "  for (var i = 0; i < 4; i++) {",
          "    var el = document.getElementById('item' + i);",
          "    var start = i * stagger;",
          "    var end = start + fps * 0.5;",
          "    var opacity = interpolateWithEasing(frame, [start, end], [0, 1], Easing.easeOut);",
          "    var tx = interpolateWithEasing(frame, [start, end], [-40, 0], Easing.easeOut);",
          "    el.style.opacity = opacity;",
          "    el.style.transform = 'translateX(' + tx + 'px)';",
          "  }",
          "}",
          "</script>"
        ],
        "animation": true
      }
    },
    {
      "speaker": "Presenter",
      "duration": 3,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex items-center justify-center bg-indigo-950 overflow-hidden'>",
          "  <svg id='particle-svg' width='800' height='450' viewBox='0 0 800 450'></svg>",
          "</div>",
          "<script>",
          "var particles = [];",
          "for (var i = 0; i < 40; i++) {",
          "  particles.push({",
          "    x: 400, y: 225,",
          "    vx: (Math.cos(i * 0.157) * (2 + (i % 5))),",
          "    vy: (Math.sin(i * 0.157) * (2 + (i % 5))),",
          "    size: 3 + (i % 4) * 2,",
          "    hue: (i * 9) % 360",
          "  });",
          "}",
          "function render(frame, totalFrames, fps) {",
          "  var svg = document.getElementById('particle-svg');",
          "  svg.innerHTML = '';",
          "  for (var i = 0; i < particles.length; i++) {",
          "    var p = particles[i];",
          "    var t = Math.min(frame / fps, 2);",
          "    var px = p.x + p.vx * t * 60;",
          "    var py = p.y + p.vy * t * 60;",
          "    var opacity = interpolate(frame, [totalFrames * 0.6, totalFrames], [1, 0]);",
          "    var c = document.createElementNS('http://www.w3.org/2000/svg', 'circle');",
          "    c.setAttribute('cx', px);",
          "    c.setAttribute('cy', py);",
          "    c.setAttribute('r', p.size * interpolateWithEasing(frame, [0, fps * 0.5], [0, 1], Easing.easeOut));",
          "    c.setAttribute('fill', 'hsl(' + p.hue + ', 80%, 65%)');",
          "    c.setAttribute('opacity', opacity);",
          "    svg.appendChild(c);",
          "  }",
          "}",
          "</script>"
        ],
        "animation": { "fps": 24 }
      }
    },
    {
      "speaker": "Presenter",
      "duration": 2,
      "image": {
        "type": "html_tailwind",
        "html": [
          "<div class='h-full flex flex-col items-center justify-center bg-slate-50'>",
          "  <h2 class='text-3xl font-bold text-gray-800 mb-8'>Static Slide (No Animation)</h2>",
          "  <p class='text-xl text-gray-500'>This beat uses html_tailwind without animation.</p>",
          "</div>"
        ]
      }
    }
  ]
}
